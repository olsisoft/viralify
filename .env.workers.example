# ===========================================
# VIRALIFY WORKERS - Environment Configuration
# ===========================================
# Copy this file to .env.workers and fill in the values
# Usage: docker-compose -f docker-compose.workers.yml --env-file .env.workers up -d

# ===========================================
# MAIN SERVER CONNECTION
# ===========================================
# IP address or hostname of the main Viralify server
MAIN_SERVER_HOST=10.0.0.1

# ===========================================
# DATABASE (PostgreSQL on main server)
# ===========================================
DB_USER=tiktok_user
DB_PASSWORD=your_db_password
DB_NAME=tiktok_platform

# ===========================================
# MESSAGE QUEUE (RabbitMQ on main server)
# ===========================================
RABBITMQ_USER=tiktok
RABBITMQ_PASSWORD=your_rabbitmq_password

# ===========================================
# REDIS (on main server for status sync)
# ===========================================
REDIS_PASSWORD=your_redis_password

# ===========================================
# LLM PROVIDERS
# ===========================================
# At least one is required
OPENAI_API_KEY=sk-...

# Optional alternative providers
LLM_PROVIDER=openai
# GROQ_API_KEY=gsk_...
# DEEPSEEK_API_KEY=...
# MISTRAL_API_KEY=...
# TOGETHER_API_KEY=...

# ===========================================
# MEDIA SERVICES (optional)
# ===========================================
ELEVENLABS_API_KEY=
CLOUDINARY_URL=
REPLICATE_API_TOKEN=

# ===========================================
# OBJECT STORAGE (MinIO via Nginx HTTPS proxy)
# ===========================================
# Workers upload videos via HTTPS through nginx on the main server
# No direct port 9000 access needed - all traffic goes through nginx :443
#
# IMPORTANT: STORAGE_ENDPOINT must NOT include /storage path!
# boto3 constructs URLs as: {endpoint}/{bucket}/{key}
# The bucket is named "storage", so boto3 will request /storage/videos/...
# which nginx routes to MinIO correctly.
STORAGE_ENABLED=true
STORAGE_ENDPOINT=https://olsitec.com
MINIO_ROOT_USER=viralify
MINIO_ROOT_PASSWORD=your_minio_password_here
STORAGE_PUBLIC_URL=https://olsitec.com/storage

# ===========================================
# PUBLIC URLs (for video access)
# ===========================================
# If workers serve videos directly, set these
# PUBLIC_BASE_URL=https://worker1.example.com/presentations
# PUBLIC_MEDIA_URL=https://worker1.example.com/media

# ===========================================
# SCALING
# ===========================================
# Recommended for 8 cores / 24GB RAM:
#   COURSE_REPLICAS=6, PRESENTATION_REPLICAS=3, MEDIA_REPLICAS=2
#
# Recommended for 4 cores / 8GB RAM:
#   COURSE_REPLICAS=2, PRESENTATION_REPLICAS=1, MEDIA_REPLICAS=1

# Number of job consumers (processes jobs from RabbitMQ queue)
COURSE_REPLICAS=6

# Number of presentation generators (creates slides + videos)
PRESENTATION_REPLICAS=3

# Number of media generators (TTS, video encoding)
MEDIA_REPLICAS=2
